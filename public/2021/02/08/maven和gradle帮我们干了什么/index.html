<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Maven和Gradle帮我们干了什么 - lyer&#39;s blog</title><meta name="Description" content=""><meta property="og:title" content="Maven和Gradle帮我们干了什么" />
<meta property="og:description" content="徒手编译java代码 以前我们都是用 IDEA 点击运行项目就跑起来了，甚至有些人完全不知道Java代码的编译过程，下面我们来徒手编译一波java代码，主要使用了javac编译工具
cloud │ └── lyer │ ├── App.java │ └── MyNumber.java --------------------------------------------------------- package cloud.lyer; public class MyNumber { public int Sum(int a, int b) { return a &#43; b; } } package cloud.lyer; public class App { public static void main(String[] args) { System.out.println(&#34;---------App------------&#34;); System.out.println(new MyNumber().Sum(1,2)); } } 注意，包名必须和路径名字一样，因为javac编译会根据 编译的当前路径开始，根据包名到对应的目录下去寻找文件进行编译为.class字节码
$ javac cloud/lyer/*.java #之后就会在对应目录下生成class文件 $ tree cloud └── lyer ├── App.class ├── App.java ├── MyNumber.class └── MyNumber.java --------------------------------------- $ java cloud/lyer/App #执行即可 当然也可以编译到指定路径下，执行必须到类路径的顶部去执行，运维jvm转载类的时候会根据包名并且以命令执行的路径开始，到相对应路径下去装载，如果在其他层级路径则会提示类找不到" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/2021/02/08/maven%E5%92%8Cgradle%E5%B8%AE%E6%88%91%E4%BB%AC%E5%B9%B2%E4%BA%86%E4%BB%80%E4%B9%88/" />
<meta property="article:published_time" content="2021-02-08T00:00:00+00:00" />
<meta property="article:modified_time" content="2021-02-08T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Maven和Gradle帮我们干了什么"/>
<meta name="twitter:description" content="徒手编译java代码 以前我们都是用 IDEA 点击运行项目就跑起来了，甚至有些人完全不知道Java代码的编译过程，下面我们来徒手编译一波java代码，主要使用了javac编译工具
cloud │ └── lyer │ ├── App.java │ └── MyNumber.java --------------------------------------------------------- package cloud.lyer; public class MyNumber { public int Sum(int a, int b) { return a &#43; b; } } package cloud.lyer; public class App { public static void main(String[] args) { System.out.println(&#34;---------App------------&#34;); System.out.println(new MyNumber().Sum(1,2)); } } 注意，包名必须和路径名字一样，因为javac编译会根据 编译的当前路径开始，根据包名到对应的目录下去寻找文件进行编译为.class字节码
$ javac cloud/lyer/*.java #之后就会在对应目录下生成class文件 $ tree cloud └── lyer ├── App.class ├── App.java ├── MyNumber.class └── MyNumber.java --------------------------------------- $ java cloud/lyer/App #执行即可 当然也可以编译到指定路径下，执行必须到类路径的顶部去执行，运维jvm转载类的时候会根据包名并且以命令执行的路径开始，到相对应路径下去装载，如果在其他层级路径则会提示类找不到"/>
<meta name="application-name" content="lyer&#39;s blog">
<meta name="apple-mobile-web-app-title" content="lyer&#39;s blog"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="/2021/02/08/maven%E5%92%8Cgradle%E5%B8%AE%E6%88%91%E4%BB%AC%E5%B9%B2%E4%BA%86%E4%BB%80%E4%B9%88/" /><link rel="prev" href="/2021/02/04/%E6%89%93%E9%80%A0%E8%87%AA%E5%B7%B1%E7%9A%84linux%E7%BB%88%E7%AB%AF%E7%8E%AF%E5%A2%83/" /><link rel="next" href="/2021/02/08/git%E6%80%BB%E7%BB%93/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Maven和Gradle帮我们干了什么",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "\/2021\/02\/08\/maven%E5%92%8Cgradle%E5%B8%AE%E6%88%91%E4%BB%AC%E5%B9%B2%E4%BA%86%E4%BB%80%E4%B9%88\/"
        },"genre": "posts","keywords": "JVM, Java, Maven, Gradle","wordcount":  158 ,
        "url": "\/2021\/02\/08\/maven%E5%92%8Cgradle%E5%B8%AE%E6%88%91%E4%BB%AC%E5%B9%B2%E4%BA%86%E4%BB%80%E4%B9%88\/","datePublished": "2021-02-08T00:00:00+00:00","dateModified": "2021-02-08T00:00:00+00:00","publisher": {
            "@type": "Organization",
            "name": "lyer"},"author": {
                "@type": "Person",
                "name": "lyer"
            },"description": ""
    }
    </script></head>
    <body header-desktop="" header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="lyer&#39;s blog">lyer&#39;s blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> archive </a><a class="menu-item" href="/tags/"> tag </a><a class="menu-item" href="/categories/"> category </a><a class="menu-item" href="/book"> book </a><a class="menu-item" href="/about"> about </a><a class="menu-item" href="/study"> study </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="lyer&#39;s blog">lyer&#39;s blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="">archive</a><a class="menu-item" href="/tags/" title="">tag</a><a class="menu-item" href="/categories/" title="">category</a><a class="menu-item" href="/book" title="">book</a><a class="menu-item" href="/about" title="">about</a><a class="menu-item" href="/study" title="">study</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Maven和Gradle帮我们干了什么</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://icepan.cloud" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>lyer</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/jvm%E5%92%8Cjava/"><i class="far fa-folder fa-fw"></i>JVM和Java</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-02-08">2021-02-08</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 158 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 1 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#徒手编译java代码">徒手编译java代码</a></li>
    <li><a href="#jar包">jar包</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="徒手编译java代码">徒手编译java代码</h2>
<p>以前我们都是用 <strong>IDEA</strong> 点击运行项目就跑起来了，甚至有些人完全不知道Java代码的编译过程，下面我们来徒手编译一波java代码，主要使用了<code>javac</code>编译工具</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="n">cloud</span>
<span class="err">│</span>       <span class="err">└──</span> <span class="n">lyer</span>
<span class="err">│</span>           <span class="err">├──</span> <span class="n">App</span><span class="o">.</span><span class="na">java</span>
<span class="err">│</span>           <span class="err">└──</span> <span class="n">MyNumber</span><span class="o">.</span><span class="na">java</span>
<span class="o">---------------------------------------------------------</span>
    
<span class="kn">package</span> <span class="nn">cloud.lyer</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyNumber</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">Sum</span><span class="o">(</span><span class="kt">int</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kn">package</span> <span class="nn">cloud.lyer</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;---------App------------&#34;</span><span class="o">);</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">MyNumber</span><span class="o">().</span><span class="na">Sum</span><span class="o">(</span><span class="n">1</span><span class="o">,</span><span class="n">2</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>注意，<strong>包名必须和路径名字一样</strong>，因为<code>javac</code>编译会根据 编译的当前路径开始，根据包名到对应的目录下去寻找文件进行编译为<code>.class</code>字节码</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ javac cloud/lyer/*.java <span class="c1">#之后就会在对应目录下生成class文件</span>
$ tree
cloud
└── lyer
    ├── App.class
    ├── App.java
    ├── MyNumber.class
    └── MyNumber.java
---------------------------------------
$ java cloud/lyer/App <span class="c1">#执行即可</span>
</code></pre></div><p>当然也可以编译到指定路径下，执行必须到类路径的顶部去执行，运维jvm转载类的时候会根据包名并且以命令执行的路径开始，到相对应路径下去装载，如果在其他层级路径则会提示类找不到</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ javac ./**/*.java -d ~/tmp/myApp
$ <span class="nb">cd</span> ~/tmp/myApp
$ java cloud/lyer/App <span class="c1">#必须到对应路径下去执行</span>
</code></pre></div><p><strong>一般操作是将所有java文件编译到指定目录比如build目录下，然后跑到build目录下去执行代码</strong></p>
<p>​</p>
<h2 id="jar包">jar包</h2>
<p><code>jar</code>包是以 <strong>ZIP</strong> 格式来压缩的，目的是为了压缩Java字节码和代码等文件，方便代码的传输，同时也将凌乱的代码统一打包为一个<code>.jar</code>文件，方便携带和执行</p>
<ul>
<li>压缩代码</li>
<li>方便携带和传输</li>
<li>方便执行</li>
</ul>
<p>我们需要将编译好的<code>.class</code>文件打包为<code>jar</code>包</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ jar cvf App.jar ./cloud <span class="c1">#c:创建 v:详细信息 f:指定新创建的文件名 </span>
</code></pre></div><p>打包之后也可以通过jar包来运行里面的代码了，而不需要解压</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ java -cp App.jar cloud.lyer.App <span class="c1">#-cp指定classpath java就会到此路径下去寻找字节码文件</span>
</code></pre></div><p>也可以在jar包里的 <code>META-INF/MANIFEST.MF</code> 中的<code>Main-Class</code>，这样的话就可以直接运行jar包了，<strong>注意MF文件不能有空行</strong></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">Manifest-Version: 1.0
Created-By: 1.7.0_06 <span class="o">(</span>Oracle Corporation<span class="o">)</span>
Main-Class: cloud.lyer.App
-------------------------------------
$ java -jar hello.jar <span class="c1">#可以成功运行 和指定classpath功能一样</span>
</code></pre></div><p>如果自己的jar包依赖的其他的jar包或则其他的库，则需要在运行的时候指定<code>classpath</code> 不指定的话默认会在当前目录下<strong>根据包名</strong> 到对应的路径下寻找</p>
<p>除非将其他库的jar包里面的字节码文件结合自己的代码重新再打一个jar包，否则就必须每次指定<code>classpath</code></p>
<p>如下，App依赖了AB.jar里面的类，那么在执行的时候就必须指定<code>classpath</code>为AB.jar和当前路径，那么JVM就会根据包名到两个路径下去寻找字节码文件了</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">── AB.jar
└── cloud
    └── lyer
        ├── App.class
-----------------------------
$ java -cp AB.jar:. cloud.lyer.App
</code></pre></div><p>如果依赖的jar包很多，那么如果一个个指定估计要疯 我们可以直接自定一个库文件的目录，也就是将该目录下的所有文件都列入<code>classpath</code>路径的意思</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ java -Djava.ext.dirs<span class="o">=</span>~/lib cloud.lyer.App
</code></pre></div><p>​</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2021-02-08</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/jvm/">JVM</a>,&nbsp;<a href="/tags/java/">Java</a>,&nbsp;<a href="/tags/maven/">Maven</a>,&nbsp;<a href="/tags/gradle/">Gradle</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/2021/02/04/%E6%89%93%E9%80%A0%E8%87%AA%E5%B7%B1%E7%9A%84linux%E7%BB%88%E7%AB%AF%E7%8E%AF%E5%A2%83/" class="prev" rel="prev" title="打造自己的终端环境"><i class="fas fa-angle-left fa-fw"></i>打造自己的终端环境</a>
            <a href="/2021/02/08/git%E6%80%BB%E7%BB%93/" class="next" rel="next" title="git总结">git总结<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="gitalk" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://github.com/gitalk/gitalk"></a>Gitalk</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.80.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://icepan.cloud" target="_blank">lyer</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/gitalk/gitalk.min.css"><script type="text/javascript" src="/lib/gitalk/gitalk.min.js"></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{"gitalk":{"admin":["biningo"],"clientID":"c8f473d59880800a7453","clientSecret":"7aa3dd0bcf966dee0a057e06eaf205caeb86b8e0","id":"2021-02-08T00:00:00Z","owner":"biningo","repo":"hugo-blog-gittalk","title":"Maven和Gradle帮我们干了什么"}}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>

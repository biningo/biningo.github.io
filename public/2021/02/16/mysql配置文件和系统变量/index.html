<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>MySql配置文件 - lyer's blog</title><meta name=Description content><meta property="og:title" content="MySql配置文件"><meta property="og:description" content="更新中&mldr;&mldr;
 配置文件 MySql配置文件的作用就是给mysqld服务器进程提供启动参数，设置一些变量，也可以通过命令行方式设置参数，但是这样太麻烦了而且不是永久的，所以一般都将这些参数写在配置文件中，mysqld进程启动的时候会按照如下方式去寻找配置文件:
$ mysql --help | grep my.cnf /etc/my.cnf /etc/mysql/my.cnf ~/.my.cnf  /etc/my.cnf /etc/mysql/my.cnf $MYSQL_HOME/my.cnf ~/.my.cnf  可以指定配置文件路径:
$ mysqld --defaults-file=/etc/my.cnf #只读取这一个配置文件 $ mysqld --defaults-extra-file=/my.cnf #添加额外的配置文件路径加入默认的搜索路径，也就是说其他路径包括这个也会被搜索到 另外注意：命令行参数优先级高于配置文件，搜索路径前面的配置高于后面的，并且有些命令行参数是只属于命令行的，不属于配置文件，配置文件都可以用命令行替代
配置文件分为如下几组:
[server] ... [mysqld] ... [mysqld_safe] [client] [mysql] [mysqladmin] ​
[mysqld]配置 TODO
[server]配置 TODO
[client]配置 TODO
[mysql]配置 TODO
[mysqld_safe]配置 TODO
[mysqladmin]配置 TODO
系统变量 1、系统变量的查看 系统变量一般通过SHOW VARIABLES LIKE xxx来查看，下面展示常用的系统变量
SHOW VARIABLES LIKE 'default_storage_engine' #默认使用的搜索引擎 在配置文件的变量可以用-线链接，而这些变量保存在数据库中则是以_链接
2、系统变量作用范围 系统变量有作用的范围之分，有下面几个范围:
 GLOBAL 全局所有用户 SESSION 特指当前一个用户，一般客户端可以通过连接字符串添加参数来设置这些变量比如设置 时区、字符集 等，这属于单个连接的客户端  查询的时候可以指定范围，不指定则默认是SESSION"><meta property="og:type" content="article"><meta property="og:url" content="/2021/02/16/mysql%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%92%8C%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F/"><meta property="article:published_time" content="2021-02-16T00:00:00+00:00"><meta property="article:modified_time" content="2021-02-16T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="MySql配置文件"><meta name=twitter:description content="更新中&mldr;&mldr;
 配置文件 MySql配置文件的作用就是给mysqld服务器进程提供启动参数，设置一些变量，也可以通过命令行方式设置参数，但是这样太麻烦了而且不是永久的，所以一般都将这些参数写在配置文件中，mysqld进程启动的时候会按照如下方式去寻找配置文件:
$ mysql --help | grep my.cnf /etc/my.cnf /etc/mysql/my.cnf ~/.my.cnf  /etc/my.cnf /etc/mysql/my.cnf $MYSQL_HOME/my.cnf ~/.my.cnf  可以指定配置文件路径:
$ mysqld --defaults-file=/etc/my.cnf #只读取这一个配置文件 $ mysqld --defaults-extra-file=/my.cnf #添加额外的配置文件路径加入默认的搜索路径，也就是说其他路径包括这个也会被搜索到 另外注意：命令行参数优先级高于配置文件，搜索路径前面的配置高于后面的，并且有些命令行参数是只属于命令行的，不属于配置文件，配置文件都可以用命令行替代
配置文件分为如下几组:
[server] ... [mysqld] ... [mysqld_safe] [client] [mysql] [mysqladmin] ​
[mysqld]配置 TODO
[server]配置 TODO
[client]配置 TODO
[mysql]配置 TODO
[mysqld_safe]配置 TODO
[mysqladmin]配置 TODO
系统变量 1、系统变量的查看 系统变量一般通过SHOW VARIABLES LIKE xxx来查看，下面展示常用的系统变量
SHOW VARIABLES LIKE 'default_storage_engine' #默认使用的搜索引擎 在配置文件的变量可以用-线链接，而这些变量保存在数据库中则是以_链接
2、系统变量作用范围 系统变量有作用的范围之分，有下面几个范围:
 GLOBAL 全局所有用户 SESSION 特指当前一个用户，一般客户端可以通过连接字符串添加参数来设置这些变量比如设置 时区、字符集 等，这属于单个连接的客户端  查询的时候可以指定范围，不指定则默认是SESSION"><meta name=application-name content="lyer's blog"><meta name=apple-mobile-web-app-title content="lyer's blog"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=/2021/02/16/mysql%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%92%8C%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F/><link rel=prev href=/2021/02/16/sql%E6%80%BB%E7%BB%93/><link rel=next href=/2021/02/16/mysql%E5%AD%97%E7%AC%A6%E9%9B%86/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"MySql配置文件","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"\/2021\/02\/16\/mysql%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%92%8C%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F\/"},"genre":"posts","keywords":"数据库, MySql","wordcount":166,"url":"\/2021\/02\/16\/mysql%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%92%8C%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F\/","datePublished":"2021-02-16T00:00:00+00:00","dateModified":"2021-02-16T00:00:00+00:00","publisher":{"@type":"Organization","name":"lyer"},"author":{"@type":"Person","name":"lyer"},"description":""}</script></head><body header-desktop header-mobile><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':(''==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:''==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="lyer's blog">lyer's blog</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>archive </a><a class=menu-item href=/tags/>tag </a><a class=menu-item href=/categories/>category </a><a class=menu-item href=/book>book </a><a class=menu-item href=/about>about </a><a class=menu-item href=/study>study </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="lyer's blog">lyer's blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/>archive</a><a class=menu-item href=/tags/>tag</a><a class=menu-item href=/categories/>category</a><a class=menu-item href=/book>book</a><a class=menu-item href=/about>about</a><a class=menu-item href=/study>study</a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">MySql配置文件</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://icepan.cloud title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw"></i>lyer</a></span>&nbsp;<span class=post-category>收录于 <a href=/categories/mysql/><i class="far fa-folder fa-fw"></i>Mysql</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-02-16>2021-02-16</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 166 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 1 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#配置文件>配置文件</a></li><li><a href=#mysqld配置>[mysqld]配置</a></li><li><a href=#server配置>[server]配置</a></li><li><a href=#client配置>[client]配置</a></li><li><a href=#mysql配置>[mysql]配置</a></li><li><a href=#mysqld_safe配置>[mysqld_safe]配置</a></li><li><a href=#mysqladmin配置>[mysqladmin]配置</a></li><li><a href=#系统变量>系统变量</a><ul><li><a href=#1系统变量的查看>1、系统变量的查看</a></li><li><a href=#2系统变量作用范围>2、系统变量作用范围</a></li><li><a href=#3系统变量的修改>3、系统变量的修改</a></li><li><a href=#4系统变量注意点>4、系统变量注意点</a></li></ul></li><li><a href=#状态变量>状态变量</a></li><li><a href=#常见系统变量>常见系统变量</a></li><li><a href=#参考>参考</a></li></ul></nav></div></div><div class=content id=content><blockquote><p><strong>更新中&mldr;&mldr;</strong></p></blockquote><h2 id=配置文件>配置文件</h2><p>MySql配置文件的作用就是给<code>mysqld</code>服务器进程提供启动参数，设置一些变量，也可以通过命令行方式设置参数，但是这样太麻烦了而且不是永久的，所以一般都将这些参数写在配置文件中，<code>mysqld</code>进程启动的时候会按照如下方式去寻找配置文件:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ mysql --help <span class=p>|</span> grep my.cnf
/etc/my.cnf /etc/mysql/my.cnf ~/.my.cnf 
</code></pre></div><ul><li><code>/etc/my.cnf</code></li><li><code>/etc/mysql/my.cnf</code></li><li><code>$MYSQL_HOME/my.cnf</code></li><li><code>~/.my.cnf</code></li></ul><p>可以指定配置文件路径:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>$ mysqld --defaults-file<span class=o>=</span>/etc/my.cnf <span class=c1>#只读取这一个配置文件</span>
$ mysqld --defaults-extra-file<span class=o>=</span>/my.cnf <span class=c1>#添加额外的配置文件路径加入默认的搜索路径，也就是说其他路径包括这个也会被搜索到</span>
</code></pre></div><p><strong>另外注意：命令行参数优先级高于配置文件，搜索路径前面的配置高于后面的，并且有些命令行参数是只属于命令行的，不属于配置文件，配置文件都可以用命令行替代</strong></p><p>配置文件分为如下几组:</p><div class=highlight><pre class=chroma><code class=language-toml data-lang=toml><span class=p>[</span><span class=nx>server</span><span class=p>]</span>
<span class=p>...</span>
<span class=p>[</span><span class=nx>mysqld</span><span class=p>]</span>
<span class=p>...</span>
<span class=p>[</span><span class=nx>mysqld_safe</span><span class=p>]</span>
<span class=p>[</span><span class=nx>client</span><span class=p>]</span>
<span class=p>[</span><span class=nx>mysql</span><span class=p>]</span>
<span class=p>[</span><span class=nx>mysqladmin</span><span class=p>]</span>
</code></pre></div><p>​</p><h2 id=mysqld配置>[mysqld]配置</h2><p>TODO</p><h2 id=server配置>[server]配置</h2><p>TODO</p><h2 id=client配置>[client]配置</h2><p>TODO</p><h2 id=mysql配置>[mysql]配置</h2><p>TODO</p><h2 id=mysqld_safe配置>[mysqld_safe]配置</h2><p>TODO</p><h2 id=mysqladmin配置>[mysqladmin]配置</h2><p>TODO</p><h2 id=系统变量>系统变量</h2><h3 id=1系统变量的查看>1、系统变量的查看</h3><p>系统变量一般通过<code>SHOW VARIABLES LIKE xxx</code>来查看，下面展示常用的系统变量</p><div class=highlight><pre class=chroma><code class=language-mysql data-lang=mysql><span class=k>SHOW</span> <span class=n>VARIABLES</span> <span class=k>LIKE</span> <span class=s1>&#39;default_storage_engine&#39;</span> <span class=c1>#默认使用的搜索引擎
</span></code></pre></div><p>在配置文件的变量可以用<code>-</code>线链接，而这些变量保存在数据库中则是以<code>_</code>链接</p><h3 id=2系统变量作用范围>2、系统变量作用范围</h3><p>系统变量有作用的范围之分，有下面几个范围:</p><ul><li><code>GLOBAL</code> 全局所有用户</li><li><code>SESSION</code> 特指当前一个用户，一般客户端可以通过连接字符串添加参数来设置这些变量比如设置 <strong>时区、字符集</strong> 等，这属于单个连接的客户端</li></ul><p>查询的时候可以指定范围，不指定则默认是<code>SESSION</code></p><div class=highlight><pre class=chroma><code class=language-mysql data-lang=mysql><span class=k>SHOW</span> <span class=n>GLOBAL</span> <span class=n>VARIABLES</span> <span class=k>LIKE</span> <span class=s1>&#39;default_%&#39;</span>
</code></pre></div><h3 id=3系统变量的修改>3、系统变量的修改</h3><p>修改系统变量可以在 <strong>配置文件中修改</strong>，也可以直接在数据库中修改，使用<code>SET</code> 指令，如果不指定范围，则默认也是<code>SESSION</code></p><div class=highlight><pre class=chroma><code class=language-mysql data-lang=mysql><span class=c1>#1、SET [GLOBAL|SESSION] 系统变量名 = 值;
</span><span class=c1></span><span class=kt>SET</span> <span class=n>default_storage_engine</span> <span class=o>=</span> <span class=n>MyISAM</span> <span class=c1>#默认SESSION作用域
</span><span class=c1></span><span class=kt>SET</span> <span class=n>GLOBAL</span> <span class=n>default_storage_engine</span><span class=o>=</span><span class=n>InnoDB</span>

<span class=c1>#2、SET [@@(GLOBAL|SESSION).]var_name = XXX
</span><span class=c1></span><span class=kt>SET</span> <span class=o>@@</span><span class=n>GLOBAL</span><span class=p>.</span><span class=n>default_storage_engine</span> <span class=o>=</span> <span class=n>MyISAM</span><span class=p>;</span>
<span class=kt>SET</span> <span class=o>@@</span><span class=n>default_storage_engine</span> <span class=o>=</span> <span class=n>MyISAM</span><span class=p>;</span> <span class=c1>#默认就是SESSION
</span></code></pre></div><h3 id=4系统变量注意点>4、系统变量注意点</h3><ul><li><p>大部分系统变量有很多都是可以在配置文件中指定的，有些系统变量是 <strong>运行时生成</strong> 的不可以当启动项来设置，比如: <strong>状态变量</strong></p></li><li><p>有些系统变量可以热跟新，修改即生效，有些则修改之后需要重启才会生效</p></li><li><p>有些系统变量只有<code>GLOBAL</code>或<code>SESSION</code>作用域，有些两种都可以设置</p></li><li><p>有的系统变量是 <strong>readonly</strong> 的，比如<code>version</code> MySql的版本</p></li></ul><p>​</p><h2 id=状态变量>状态变量</h2><p>还有一种 <strong>状态系统变量</strong>，由系统运行时产生，用于记录服务器相关状态的，比如当前正在连接的客户端个数等</p><p><strong>状态变量</strong> 也有两个范围:</p><ul><li><code>GLOBAL</code></li><li><code>SESSION</code></li></ul><div class=highlight><pre class=chroma><code class=language-mysql data-lang=mysql><span class=k>SHOW</span> <span class=n>STATUS</span> <span class=k>LIKE</span> <span class=s1>&#39;threads_connected&#39;</span> <span class=c1>#当前有多少客户端连接
</span></code></pre></div><p>​</p><h2 id=常见系统变量>常见系统变量</h2><p>系统变量</p><div class=highlight><pre class=chroma><code class=language-mysql data-lang=mysql><span class=k>SHOW</span> <span class=n>ENGINES</span> <span class=c1>#系统支持的存储引擎
</span><span class=c1></span><span class=k>SHOW</span> <span class=k>CHARACTER</span> <span class=kt>SET</span> <span class=c1>#支持的字符集
</span></code></pre></div><div class=highlight><pre class=chroma><code class=language-mysql data-lang=mysql><span class=k>SHOW</span> <span class=n>VARIABLES</span> <span class=k>LIKE</span> <span class=s1>&#39;default_storage_engine&#39;</span> <span class=c1>#默认使用的搜索引擎
</span><span class=c1></span><span class=k>SHOW</span> <span class=n>VARIABLES</span> <span class=k>LIKE</span> <span class=s1>&#39;max_connections&#39;</span> <span class=c1>#运行的同时连接数
</span><span class=c1></span><span class=k>SHOW</span> <span class=n>VARIABLES</span> <span class=k>LIKE</span> <span class=s1>&#39;time_zone&#39;</span><span class=c1>#数据库使用的时区,默认为SYSTEM和操作系统保持一致
</span></code></pre></div><p>状态变量</p><div class=highlight><pre class=chroma><code class=language-mysql data-lang=mysql><span class=k>SHOW</span> <span class=n>STATUS</span> <span class=k>LIKE</span> <span class=s1>&#39;thread%&#39;</span> <span class=c1>#注意Mysql的查询都是是不分大小写的
</span><span class=c1></span><span class=k>SHOW</span> <span class=n>STATUS</span> <span class=k>LIKE</span> <span class=s1>&#39;threads_connected&#39;</span> <span class=c1>#当前有多少客户端连接
</span></code></pre></div><p>​</p><h2 id=参考>参考</h2><p>《MySql是怎样运行的》</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2021-02-16</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/>数据库</a>,&nbsp;<a href=/tags/mysql/>MySql</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/2021/02/16/sql%E6%80%BB%E7%BB%93/ class=prev rel=prev title=SQL总结><i class="fas fa-angle-left fa-fw"></i>SQL总结</a>
<a href=/2021/02/16/mysql%E5%AD%97%E7%AC%A6%E9%9B%86/ class=next rel=next title=MySql字符集>MySql字符集<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments><div id=gitalk class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://github.com/gitalk/gitalk></a>Gitalk</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.80.0">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i>LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2021</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://icepan.cloud target=_blank>lyer</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/lib/gitalk/gitalk.min.css><script type=text/javascript src=/lib/gitalk/gitalk.min.js></script><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{"gitalk":{"admin":["biningo"],"clientID":"c8f473d59880800a7453","clientSecret":"7aa3dd0bcf966dee0a057e06eaf205caeb86b8e0","id":"2021-02-16T00:00:00Z","owner":"biningo","repo":"hugo-blog-gittalk","title":"MySql配置文件"}}};</script><script type=text/javascript src=/js/theme.min.js></script></body></html>
---
title: 文件系统
date: 2021-01-28
categories: [操作系统]
tags: [Linux,OS]
draft: true
---



<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/abb113f9353e41f787e63fa438df7c9b~tplv-k3u1fbpfcp-watermark.image"  />

> **super block** 超级块

在索引导块后面，主要包含整个文件系统的一些基本元数据：

- 文件系统中的数据块数
- 文件系统设置的数据块大小（一个数据块通常占据整数个扇区比如：`4个扇区`  `4k`大小）
- 空闲块数
- 空闲的innode节点数
- .......

> **空闲空间管理**

管理整个分区中空闲的数据块，主要有如下几个管理方法：

- `bitmap`（二进制表示所有的数据块，0表示没有使用，1表示使用了，linux的ext4使用此方法）
- 链表（每个空闲块都记录 下一个 空闲块的地址，第一个空闲块的地址保存在此处）

> **innode块**

是一个数组结构，每个文件都有一个`innode`，linux用innode号`用来标识不同的文件，而不是通过文件名

inode 节点主要包括了以下信息：

- 模式/权限（保护）

- 所有者 ID

- 组 ID

- 文件大小

- 文件的硬链接数

- 上次访问时间

- 最后修改时间

- inode 上次修改时间

- 文件的数据块映射表（0-n逻辑数据块号分别映射到实际的数据块号）**所以同一个文件的数据可以不连续的存放在不同的数据块中** innode结构图如下：

    <img src="https://user-gold-cdn.xitu.io/2020/3/25/1711022488af2cbd?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="img" style="zoom:50%;" />

​    

​    